"use strict";(self["webpackChunkvue_router_demo"]=self["webpackChunkvue_router_demo"]||[]).push([[132],{5132:function(t,a,e){e.r(a),e.d(a,{default:function(){return p}});var s=function(){var t=this,a=t._self._c;return t.postlist.length?a("div",{staticClass:"post-list-view"},t._l(t.postlist,(function(e){return a("div",{key:e.id},[a("a",{attrs:{href:"#"}},[a("img",{attrs:{src:e.author.avatar_url,alt:""}})]),a("span",[a("span",[t._v(t._s(e.reply_count))]),a("span",[t._v("/")]),a("span",[t._v(t._s(e.visit_count))])]),a("div",{staticClass:"content-title"},[a("span",[a("span",[t._v(" "+t._s("good"===e.tab?"精华":"share"===e.tab?"分享":"ask"===e.tab?"问答":"job"===e.tab?"招聘":"dev"===e.tab?"测试":"")+" ")])]),a("router-link",{attrs:{to:`/post/${e.id}`}},[t._v(t._s(e.title))])],1)])})),0):t._e()},o=[];const n=function(){return document.documentElement.scrollTop},l=function(){return document.documentElement.scrollHeight},i=function(){return document.documentElement.clientHeight};var r={props:["tab"],data(){return{page:1,postlist:[],loading:!1,pageNumbers:[{tab:"all",total:280},{tab:"good",total:720},{tab:"share",total:200},{tab:"ask",total:80},{tab:"job",total:80},{tab:"dev",total:280}]}},computed:{total(){const t=this.tab?this.tab:"all";return this.pageNumbers.find((a=>a.tab===t)).total}},watch:{tab:{async handler(t){const a=sessionStorage.getItem("page")||1,e=sessionStorage.getItem("tab")||"all";this.page=e===(this.tab?this.tab:"all")?1*a:1;const s=await this.$http.get(`/topics?tab=${t||"all"}&page=${this.page}`);this.postlist=s.data},immediate:!0}},mounted(){window.addEventListener("scroll",this.load)},methods:{async pagechange(t){const a=await this.$http.get(`/topics?tab=${this.tab?this.tab:"all"}&page=${t}`);this.postlist=a.data},load(){const t=l()-n()-i();t<=200&&(this.loading=!0,console.log("加载中"),setTimeout((()=>{this.loading=!1,console.log("加载完毕")}),2e3))}},destroyed(){window.removeEventListener("scroll",this.load)}},c=r,u=e(1001),d=(0,u.Z)(c,s,o,!1,null,"930cdcf0",null),p=d.exports}}]);
//# sourceMappingURL=132.05642fd4.js.map