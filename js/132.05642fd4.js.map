{"version":3,"file":"js/132.05642fd4.js","mappings":"0KAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAQF,EAAII,SAASC,OAAQH,EAAG,MAAM,CAACI,YAAY,kBAAkBN,EAAIO,GAAIP,EAAII,UAAU,SAASI,GAAM,OAAON,EAAG,MAAM,CAACO,IAAID,EAAKE,IAAI,CAACR,EAAG,IAAI,CAACS,MAAM,CAAC,KAAO,MAAM,CAACT,EAAG,MAAM,CAACS,MAAM,CAAC,IAAMH,EAAKI,OAAOC,WAAW,IAAM,QAAQX,EAAG,OAAO,CAACA,EAAG,OAAO,CAACF,EAAIc,GAAGd,EAAIe,GAAGP,EAAKQ,gBAAgBd,EAAG,OAAO,CAACF,EAAIc,GAAG,OAAOZ,EAAG,OAAO,CAACF,EAAIc,GAAGd,EAAIe,GAAGP,EAAKS,kBAAkBf,EAAG,MAAM,CAACI,YAAY,iBAAiB,CAACJ,EAAG,OAAO,CAACA,EAAG,OAAO,CAACF,EAAIc,GAAG,IAAId,EAAIe,GAAgB,SAAbP,EAAKU,IAAiB,KAAoB,UAAbV,EAAKU,IAAkB,KAAoB,QAAbV,EAAKU,IAAgB,KAAoB,QAAbV,EAAKU,IAAgB,KAAoB,QAAbV,EAAKU,IAAgB,KAAO,IAAI,SAAShB,EAAG,cAAc,CAACS,MAAM,CAAC,GAAM,SAAQH,EAAKE,OAAO,CAACV,EAAIc,GAAGd,EAAIe,GAAGP,EAAKW,WAAW,IAAI,IAAG,GAAGnB,EAAIoB,IAC5uB,EACIC,EAAkB,GCDtB,MAAMC,EAAqB,WACvB,OAAOC,SAASC,gBAAgBC,SACpC,EAGMC,EAAoB,WACtB,OAAOH,SAASC,gBAAgBG,YACpC,EAGMC,EAAwB,WAC1B,OAAOL,SAASC,gBAAgBK,YACpC,EC0BA,OACAC,MAAAA,CAAAA,OACAC,OACA,OACAC,KAAAA,EACA5B,SAAAA,GACA6B,SAAAA,EACAC,YAAAA,CACA,CACAhB,IAAAA,MACAiB,MAAAA,KAEA,CACAjB,IAAAA,OACAiB,MAAAA,KAEA,CACAjB,IAAAA,QACAiB,MAAAA,KAEA,CACAjB,IAAAA,MACAiB,MAAAA,IAEA,CACAjB,IAAAA,MACAiB,MAAAA,IAEA,CACAjB,IAAAA,MACAiB,MAAAA,MAIA,EACAC,SAAAA,CACAD,QACA,gCACA,kDACA,GAEAE,MAAAA,CACAnB,IAAAA,CACA,iBACA,0CACA,uCACA,8CACA,6BACA,6CAEA,oBACA,EACAoB,WAAAA,IAGAC,UACAC,OAAAA,iBAAAA,SAAAA,KAAAA,KACA,EACAC,QAAAA,CACA,oBACA,6BACA,oDAEA,oBACA,EACAC,OACA,QACAhB,IAAAA,IAAAA,IACA,SACA,gBACAiB,QAAAA,IAAAA,OACAC,YAAAA,KACA,gBACAD,QAAAA,IAAAA,OAAAA,GACA,KAEA,GAEAE,YACAL,OAAAA,oBAAAA,SAAAA,KAAAA,KACA,GCvHiQ,I,UCQ7PM,GAAY,OACd,EACA/C,EACAsB,GACA,EACA,KACA,WACA,MAIF,EAAeyB,EAAiB,O","sources":["webpack://vue-router-demo/./src/views/PostListViewOther.vue","webpack://vue-router-demo/./src/utils/scroll.js","webpack://vue-router-demo/src/views/PostListViewOther.vue","webpack://vue-router-demo/./src/views/PostListViewOther.vue?84eb","webpack://vue-router-demo/./src/views/PostListViewOther.vue?1d8c"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return (_vm.postlist.length)?_c('div',{staticClass:\"post-list-view\"},_vm._l((_vm.postlist),function(post){return _c('div',{key:post.id},[_c('a',{attrs:{\"href\":\"#\"}},[_c('img',{attrs:{\"src\":post.author.avatar_url,\"alt\":\"\"}})]),_c('span',[_c('span',[_vm._v(_vm._s(post.reply_count))]),_c('span',[_vm._v(\"/\")]),_c('span',[_vm._v(_vm._s(post.visit_count))])]),_c('div',{staticClass:\"content-title\"},[_c('span',[_c('span',[_vm._v(\" \"+_vm._s(post.tab === \"good\" ? \"精华\" : post.tab === \"share\" ? \"分享\" : post.tab === \"ask\" ? \"问答\" : post.tab === \"job\" ? \"招聘\" : post.tab === \"dev\" ? \"测试\" : \"\")+\" \")])]),_c('router-link',{attrs:{\"to\":`/post/${post.id}`}},[_vm._v(_vm._s(post.title))])],1)])}),0):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// 滚动条距离顶部的距离\r\nconst getWindewSrcollTop = function () {\r\n    return document.documentElement.scrollTop\r\n}\r\n\r\n// 文档的高度\r\nconst getDocumentHeight = function () {\r\n    return document.documentElement.scrollHeight\r\n}\r\n\r\n// 窗口的高度\r\nconst getWindewSrcollHeight = function () {\r\n    return document.documentElement.clientHeight\r\n}\r\n\r\nexport { getWindewSrcollTop, getDocumentHeight, getWindewSrcollHeight }","<template v-loading=\"loading\">\r\n  <div class=\"post-list-view\" v-if=\"postlist.length\">\r\n    <div v-for=\"post in postlist\" :key=\"post.id\">\r\n      <a href=\"#\"><img :src=\"post.author.avatar_url\" alt=\"\" /></a>\r\n      <span>\r\n        <span>{{ post.reply_count }}</span>\r\n        <span>/</span>\r\n        <span>{{ post.visit_count }}</span>\r\n      </span>\r\n      <div class=\"content-title\">\r\n        <span>\r\n          <span>\r\n            {{\r\n              post.tab === \"good\"\r\n                ? \"精华\"\r\n                : post.tab === \"share\"\r\n                ? \"分享\"\r\n                : post.tab === \"ask\"\r\n                ? \"问答\"\r\n                : post.tab === \"job\"\r\n                ? \"招聘\"\r\n                : post.tab === \"dev\"\r\n                ? \"测试\"\r\n                : \"\"\r\n            }}\r\n          </span>\r\n        </span>\r\n        <router-link :to=\"`/post/${post.id}`\">{{ post.title }}</router-link>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  getWindewSrcollTop,\r\n  getDocumentHeight,\r\n  getWindewSrcollHeight,\r\n} from \"../utils/scroll\";\r\nexport default {\r\n  props: [\"tab\"],\r\n  data() {\r\n    return {\r\n      page: 1,\r\n      postlist: [],\r\n      loading: false,\r\n      pageNumbers: [\r\n        {\r\n          tab: \"all\",\r\n          total: 280,\r\n        },\r\n        {\r\n          tab: \"good\",\r\n          total: 720,\r\n        },\r\n        {\r\n          tab: \"share\",\r\n          total: 200,\r\n        },\r\n        {\r\n          tab: \"ask\",\r\n          total: 80,\r\n        },\r\n        {\r\n          tab: \"job\",\r\n          total: 80,\r\n        },\r\n        {\r\n          tab: \"dev\",\r\n          total: 280,\r\n        },\r\n      ],\r\n    };\r\n  },\r\n  computed: {\r\n    total() {\r\n      const tab = this.tab ? this.tab : \"all\";\r\n      return this.pageNumbers.find((ele) => ele.tab === tab).total;\r\n    },\r\n  },\r\n  watch: {\r\n    tab: {\r\n      async handler(newValue) {\r\n        const page = sessionStorage.getItem(\"page\") || 1;\r\n        const tab = sessionStorage.getItem(\"tab\") || \"all\";\r\n        this.page = tab === (this.tab ? this.tab : \"all\") ? page * 1 : 1;\r\n        const res = await this.$http.get(\r\n          `/topics?tab=${newValue ? newValue : \"all\"}&page=${this.page}`\r\n        );\r\n        this.postlist = res.data;\r\n      },\r\n      immediate: true,\r\n    },\r\n  },\r\n  mounted() {\r\n    window.addEventListener(\"scroll\", this.load);\r\n  },\r\n  methods: {\r\n    async pagechange(page) {\r\n      const res = await this.$http.get(\r\n        `/topics?tab=${this.tab ? this.tab : \"all\"}&page=${page}`\r\n      );\r\n      this.postlist = res.data;\r\n    },\r\n    load() {\r\n      const scrollBottom =\r\n        getDocumentHeight() - getWindewSrcollTop() - getWindewSrcollHeight();\r\n      if (scrollBottom <= 200) {\r\n        this.loading = true;\r\n        console.log(\"加载中\");\r\n        setTimeout(() => {\r\n          this.loading = false;\r\n          console.log(\"加载完毕\");\r\n        }, 2000);\r\n      }\r\n    },\r\n  },\r\n  destroyed() {\r\n    window.removeEventListener(\"scroll\", this.load);\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.post-list-view {\r\n  border-radius: 0 0 3px 3px;\r\n  background-color: #fff;\r\n}\r\n.post-list-view > div {\r\n  background: #fff;\r\n  padding: 10px;\r\n  font-size: 14px;\r\n  line-height: 30px;\r\n  border-top: 1px solid #f0f0f0;\r\n}\r\n.post-list-view > div:hover {\r\n  background-color: #f1f1f1;\r\n}\r\n.post-list-view > div > a {\r\n  vertical-align: middle;\r\n  display: inline-block;\r\n}\r\n.post-list-view > div > a img {\r\n  width: 30px;\r\n  height: 30px;\r\n  border-radius: 3px;\r\n  display: block;\r\n}\r\n.post-list-view > div > span {\r\n  display: inline-block;\r\n  width: 80px;\r\n  text-align: center;\r\n}\r\n.post-list-view > div > span span:nth-child(1) {\r\n  color: #9e78c0;\r\n}\r\n.post-list-view > div > span span:nth-child(2) {\r\n  margin: 0 1px;\r\n  font-size: 10px;\r\n}\r\n.post-list-view > div > span span:nth-child(3) {\r\n  font-size: 10px;\r\n  color: #b4b4b4;\r\n}\r\n.content-title {\r\n  display: inline-block;\r\n}\r\n.content-title span {\r\n  position: relative;\r\n}\r\n.content-title span span {\r\n  width: 40px;\r\n  line-height: 22px;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  text-align: center;\r\n  background-color: #e5e5e5;\r\n  color: #999;\r\n}\r\n.content-title span span.topgood {\r\n  background-color: #80bd01;\r\n  color: #fff;\r\n}\r\n.content-title a {\r\n  margin-left: 45px;\r\n  color: #333;\r\n}\r\n.content-title a:hover {\r\n  text-decoration: underline;\r\n}\r\n</style>","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PostListViewOther.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PostListViewOther.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PostListViewOther.vue?vue&type=template&id=930cdcf0&scoped=true&v-loading=loading&\"\nimport script from \"./PostListViewOther.vue?vue&type=script&lang=js&\"\nexport * from \"./PostListViewOther.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PostListViewOther.vue?vue&type=style&index=0&id=930cdcf0&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"930cdcf0\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","postlist","length","staticClass","_l","post","key","id","attrs","author","avatar_url","_v","_s","reply_count","visit_count","tab","title","_e","staticRenderFns","getWindewSrcollTop","document","documentElement","scrollTop","getDocumentHeight","scrollHeight","getWindewSrcollHeight","clientHeight","props","data","page","loading","pageNumbers","total","computed","watch","immediate","mounted","window","methods","load","console","setTimeout","destroyed","component"],"sourceRoot":""}